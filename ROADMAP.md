# نقشه راه فنی (Technical Roadmap)

این مستند، نقشه راه و تسک‌بندی فنی پروژه بومی‌سازی و بهبود پلتفرم Gops (Karenderia) برای بازار ایران را شرح می‌دهد.

## فاز ۱: تحلیل و مستندسازی (انجام شده)

- **عنوان:** شناسایی معماری و ساختار پروژه
- **توضیح:** کلون کردن ریپازیتوری، تحلیل ساختار پوشه‌ها و شناسایی تکنولوژی‌های اصلی (Yii Framework برای Backend و Quasar/Vue.js برای Frontend).
- **اولویت:** High
- **وابستگی‌ها:** -
- **خروجی:** مستند `ANALYSIS.md` که معماری، جریان‌های کاربری و ریسک‌ها را تشریح می‌کند.

## فاز ۲: بومی‌سازی زبان و واحدها (انجام شده)

- **عنوان:** فارسی‌سازی متون و فعال‌سازی RTL
- **توضیح:** افزودن فایل ترجمه فارسی (`fa/index.js`) به اپلیکیشن Quasar و فعال‌سازی `direction: rtl` برای پشتیبانی از زبان فارسی.
- **اولویت:** High
- **وابستگی‌ها:** فاز ۱
- **خروجی:** رابط کاربری با قابلیت نمایش متون فارسی و چیدمان راست‌چین.

- **عنوان:** تبدیل واحد پول به تومان (IRT)
- **توضیح:** ویرایش فایل `karenderia.sql` برای افزودن «تومان» به عنوان واحد پول پیش‌فرض و حذف اعشار از نمایش قیمت‌ها.
- **اولویت:** High
- **وابستگی‌ها:** فاز ۱
- **خروجی:** نمایش تمام قیمت‌ها در سیستم با واحد تومان.

- **عنوان:** پیاده‌سازی تاریخ شمسی
- **توضیح:** شناسایی کلاس متمرکز `Date_Formatter.php` و تغییر `locale` به `fa_IR@calendar=persian` برای تبدیل خودکار تاریخ‌های میلادی به شمسی در سمت Backend.
- **اولویت:** High
- **وابستگی‌ها:** فاز ۱
- **خروجی:** نمایش تاریخ‌ها (مانند تاریخ سفارش) به صورت شمسی در سراسر اپلیکیشن.

## فاز ۳: اصلاح نقشه و مناطق سرویس‌دهی (انجام شده)

- **عنوان:** جایگزینی سرویس نقشه گوگل با نشان
- **توضیح:** ایجاد یک لایه انتزاعی (Abstraction Layer) در Backend برای سرویس نقشه و پیاده‌سازی `NeshanMapProvider`. در Frontend نیز کامپوننت `NeshanMap.vue` جایگزین کامپوننت نقشه گوگل شد.
- **اولویت:** High
- **وابستگی‌ها:** فاز ۱
- **خروجی:** عملکرد صحیح نقشه در ایران با استفاده از سرویس بومی «نشان».

- **عنوان:** افزودن قابلیت تعریف مناطق سرویس‌دهی مبتنی بر Polygon
- **توضیح:** افزودن ستون `zone_data` از نوع `TEXT` به جدول `st_zones` در `karenderia.sql` و اصلاح کنترلر و View مربوطه در پنل ادمین برای مدیریت مناطق جغرافیایی به صورت چندضلعی.
- **اولویت:** Medium
- **وابستگی‌ها:** فاز ۱
- **خروجی:** قابلیت تعریف و ویرایش مناطق سرویس‌دهی از طریق پنل مدیریت.

## فاز ۴: اصلاح پرداخت (انجام شده)

- **عنوان:** پیاده‌سازی درگاه پرداخت زرین‌پال
- **توضیح:** ایجاد کنترلر `ZarinpalController.php` در Backend برای مدیریت فرآیند پرداخت و بازگشت از درگاه. در Frontend نیز کامپوننت `ZarinpalComponents.vue` برای نمایش در صفحه پرداخت ایجاد شد.
- **اولویت:** High
- **وابستگی‌ها:** فاز ۱
- **خروجی:** امکان پرداخت آنلاین از طریق درگاه زرین‌پال با پشتیبانی از حالت Sandbox.

## فاز ۵: توسعه/تکمیل ماژول‌ها (انجام شده)

- **عنوان:** افزودن قابلیت «ظرفیت روزانه» برای غذاها
- **توضیح:** افزودن ستون `stock` به جدول `st_item`، اصلاح مدل `AR_item.php` برای اعتبارسنجی و ویرایش View مربوطه برای نمایش فیلد «تعداد موجودی» در فرم مدیریت غذا.
- **اولویت:** High
- **وابستگی‌ها:** فاز ۱
- **خروجی:** قابلیت تعیین تعداد قابل فروش برای هر آیتم غذا توسط مامان‌ها.

- **عنوان:** ساده‌سازی پنل مامان‌ها (پیشنهادی)
- **توضیح:** تحلیل پنل فعلی و ارائه پیشنهاد برای حذف منوهای غیرضروری و ساده‌سازی فرم‌ها جهت بهبود تجربه کاربری.
- **اولویت:** Medium
- **وابستگی‌ها:** فاز ۱
- **خروجی:** مستند `ANALYSIS_MOMS_PANEL.md` (در دست تهیه).

## فاز ۶: تست، دیباگ و آماده‌سازی (در حال انجام)

- **عنوان:** تدوین سناریوهای تست
- **توضیح:** تهیه لیستی از سناریوهای تست برای جریان‌های اصلی کاربر (مامان، مشتری، ادمین) و موارد حساس مانند پرداخت، تاریخ و نقشه.
- **اولویت:** High
- **وابستگی‌ها:** تمام فازهای قبلی.
- **خروجی:** مستند `TEST_SCENARIOS.md`.

- **عنوان:** تهیه چک‌لیست نهایی
- **توضیح:** ایجاد یک چک‌لیست جامع برای بررسی تمام بخش‌های پروژه و اطمینان از عدم فراموشی موارد مهم.
- **اولویت:** High
- **وابستگی‌ها:** تمام فازهای قبلی.
- **خروجی:** مستند `FINAL_CHECKLIST.md`.
